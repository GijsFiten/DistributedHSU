import numpy as np
import matplotlib.pyplot as plt

##data from local run model

Save_files = [0.4953887462615967, 1.0240757465362549, 0.9420440196990967, 0.40145325660705566, 0.8872568607330322, 0.57993483543396, 0.5641863346099854, 0.8628144264221191, 0.5457937717437744, 0.5470619201660156, 1.0721344947814941, 0.5559308528900146, 0.39413881301879883, 0.7340044975280762, 0.699894905090332, 0.7710938453674316, 0.7484538555145264, 0.796276330947876, 1.1142544746398926, 0.7426071166992188, 0.8715107440948486, 0.7738151550292969, 0.1300373077392578, 0.819528341293335, 0.7267096042633057, 1.1075336933135986, 1.0237183570861816, 0.581526517868042, 0.836205005645752, 0.6328988075256348, 1.1967384815216064, 0.4613015651702881, 0.6531927585601807, 0.6291837692260742, 0.5415558815002441, 0.7395451068878174, 0.657339334487915, 0.6905720233917236, 0.8108158111572266, 1.1593821048736572, 0.5965909957885742, 0.6825182437896729, 1.1877152919769287, 0.8074076175689697, 0.648184061050415, 1.0034754276275635, 1.3037993907928467, 0.5141253471374512, 0.38209104537963867, 0.36259984970092773, 0.7281596660614014, 0.5867927074432373, 0.38950181007385254, 0.9557764530181885, 0.7527639865875244, 0.3458366394042969, 0.28701210021972656, 0.4104342460632324, 0.5545687675476074, 0.3407256603240967, 0.4020702838897705, 0.574061393737793, 0.28824925422668457, 0.3795158863067627, 0.8101987838745117, 0.4929521083831787, 0.21248531341552734, 0.11303210258483887, 0.23653721809387207, 0.20927762985229492, 0.3854682445526123, 0.5541031360626221, 0.22518610954284668, 0.26151227951049805, 0.2189805507659912, 0.33522486686706543, 0.1941671371459961, 1.2691245079040527, 0.46653318405151367, 0.575303316116333, 1.0613021850585938, 0.39411497116088867, 0.34604334831237793, 0.8794095516204834, 0.523308515548706, 0.30910325050354004, 1.2273414134979248, 0.36834192276000977, 0.4807088375091553, 0.5099434852600098, 0.32282495498657227, 1.0662729740142822, 0.2839341163635254, 0.11478853225708008, 0.22196602821350098]
Do_predictions_Implicit = [2.4373602867126465, 4.1085875034332275, 3.7828290462493896, 1.5646977424621582, 3.546990394592285, 2.5292985439300537, 2.0039772987365723, 3.3252713680267334, 1.9421381950378418, 1.9019865989685059, 3.417454242706299, 1.9249684810638428, 1.4152779579162598, 3.0347304344177246, 2.8330721855163574, 3.28271222114563, 3.2125284671783447, 2.890469789505005, 3.8333561420440674, 2.8146183490753174, 2.958220958709717, 2.7735211849212646, 0.5402622222900391, 2.834137439727783, 2.346226930618286, 3.7888853549957275, 3.435300350189209, 1.9419307708740234, 2.8835999965667725, 2.4295220375061035, 5.180837631225586, 1.8573906421661377, 2.428938627243042, 2.7489991188049316, 1.9272022247314453, 2.846160650253296, 2.7372353076934814, 2.749199867248535, 2.884567975997925, 3.88527250289917, 2.341717481613159, 2.7855091094970703, 3.846548318862915, 3.279528856277466, 2.374397039413452, 3.3932700157165527, 4.4942405223846436, 1.9197373390197754, 1.1525335311889648, 1.3723127841949463, 2.6519012451171875, 2.3509743213653564, 1.4410619735717773, 3.7672502994537354, 2.7728583812713623, 1.4654185771942139, 1.4286251068115234, 1.5326943397521973, 2.331315279006958, 1.3931267261505127, 1.8961620330810547, 1.9480438232421875, 0.9723165035247803, 1.4139528274536133, 3.2474005222320557, 1.820343255996704, 0.9111053943634033, 0.48655152320861816, 0.9737772941589355, 1.0022532939910889, 1.8187007904052734, 1.9578380584716797, 0.9499139785766602, 1.0103857517242432, 0.9191524982452393, 1.3996391296386719, 0.5010676383972168, 4.3275063037872314, 1.8463513851165771, 2.3585031032562256, 3.7675561904907227, 1.43599534034729, 1.0333976745605469, 3.343075752258301, 1.8855774402618408, 1.427933931350708, 4.2829954624176025, 1.3980984687805176, 1.4991950988769531, 2.3473780155181885, 1.4489655494689941, 4.171287536621094, 0.9923262596130371, 0.4647660255432129, 0.5523836612701416]
Do_2D_detections = [2.6305899620056152, 2.571563243865967, 2.4848365783691406, 2.4792914390563965, 2.4832873344421387, 2.494673490524292, 2.4759435653686523, 2.548065423965454, 2.4616482257843018, 2.5173463821411133, 2.47377872467041, 2.5386853218078613, 2.469942569732666, 2.4693539142608643, 2.4709882736206055, 2.4726264476776123, 2.479987144470215, 2.484998941421509, 2.50243878364563, 2.582996368408203, 2.5075762271881104, 2.562021255493164, 2.4720776081085205, 2.474677085876465, 2.459890842437744, 2.4981305599212646, 2.481595039367676, 2.538339138031006, 2.4811525344848633, 2.547206163406372, 2.500746965408325, 2.475837469100952, 2.496095895767212, 2.5421154499053955, 2.479735851287842, 2.5170974731445312, 2.487725019454956, 2.6106693744659424, 2.4825005531311035, 2.592780828475952, 2.483609676361084, 2.557873487472534, 2.478598117828369, 2.514348030090332, 2.497124433517456, 2.5023396015167236, 2.5558390617370605, 2.4627528190612793, 2.4840903282165527, 2.563713312149048, 2.9068942070007324, 2.505221128463745, 2.478111505508423, 2.5253872871398926, 2.4731247425079346, 2.4916250705718994, 2.4942455291748047, 2.4768435955047607, 2.4775257110595703, 2.492161512374878, 2.5411481857299805, 2.4626410007476807, 2.4751336574554443, 2.487886905670166, 2.5201237201690674, 2.472252368927002, 2.462233781814575, 2.5110433101654053, 2.463304042816162, 2.4602861404418945, 2.51994252204895, 2.4784340858459473, 2.45951247215271, 2.4662539958953857, 2.4578182697296143, 2.4645533561706543, 2.463655948638916, 2.4634807109832764, 2.4625627994537354, 2.4710521697998047, 2.492401361465454, 2.4675018787384033, 2.5010080337524414, 2.478527307510376, 2.502546787261963, 2.4708094596862793, 2.562657594680786, 2.474601984024048, 2.523366928100586, 2.4914886951446533, 2.53312611579895, 2.4797329902648926, 2.523705244064331, 2.467291831970215, 2.4291152954101562]
Add_weights_from_model = [0.16563677787780762, 0.16532349586486816, 0.16492033004760742, 0.1674196720123291, 0.1650395393371582, 0.1660921573638916, 0.1647782325744629, 0.16148662567138672, 0.16375279426574707, 0.1632688045501709, 0.21767783164978027, 0.16108131408691406, 0.16202211380004883, 0.16124415397644043, 0.16566848754882812, 0.1626734733581543, 0.1621074676513672, 0.16267848014831543, 0.16153454780578613, 0.16088008880615234, 0.1618366241455078, 0.21895146369934082, 0.16184091567993164, 0.16614460945129395, 0.16194653511047363, 0.21826982498168945, 0.16501355171203613, 0.16332387924194336, 0.16170907020568848, 0.16249322891235352, 0.16112971305847168, 0.16565871238708496, 0.16054129600524902, 0.16291189193725586, 0.1623377799987793, 0.16326451301574707, 0.1621074676513672, 0.16166400909423828, 0.16238737106323242, 0.16135120391845703, 0.16221046447753906, 0.16210436820983887, 0.1609361171722412, 0.1621263027191162, 0.1615445613861084, 0.16292786598205566, 0.1618785858154297, 0.1662919521331787, 0.16276192665100098, 0.16541767120361328, 0.1629164218902588, 0.16399097442626953, 0.16411423683166504, 0.1625661849975586, 0.16170501708984375, 0.16171813011169434, 0.16305804252624512, 0.16178321838378906, 0.16151928901672363, 0.16198992729187012, 0.16179227828979492, 0.16298198699951172, 0.2194967269897461, 0.16254782676696777, 0.16150832176208496, 0.21776556968688965, 0.16149377822875977, 0.1628124713897705, 0.1617875099182129, 0.1616048812866211, 0.1619715690612793, 0.16232013702392578, 0.16144633293151855, 0.16245627403259277, 0.1648409366607666, 0.16125869750976562, 0.1625359058380127, 0.16331887245178223, 0.16207528114318848, 0.16327977180480957, 0.1630995273590088, 0.16241788864135742, 0.16075611114501953, 0.16261005401611328, 0.1602952480316162, 0.16144251823425293, 0.16303229331970215, 0.16203594207763672, 0.17728424072265625, 0.16341209411621094, 0.16198205947875977, 0.16235756874084473, 0.16192054748535156, 0.16081690788269043, 0.1619575023651123]
Load_Implicit_Model = [3.6666808128356934, 1.3751599788665771, 1.3735244274139404, 1.4291322231292725, 1.3734347820281982, 1.3716232776641846, 1.373370885848999, 1.372079610824585, 1.3599493503570557, 1.3681764602661133, 1.3609471321105957, 1.3630688190460205, 1.3647449016571045, 1.3643860816955566, 1.365555763244629, 1.3660924434661865, 1.364400863647461, 1.3623943328857422, 1.3651771545410156, 1.3600869178771973, 1.3606431484222412, 1.3614394664764404, 1.3632781505584717, 1.3680248260498047, 1.4186594486236572, 1.3615267276763916, 1.3659350872039795, 1.3615596294403076, 1.3667104244232178, 1.3659389019012451, 1.3637800216674805, 1.3726952075958252, 1.3644938468933105, 1.3665862083435059, 1.3639845848083496, 1.3650782108306885, 1.359734296798706, 1.3638947010040283, 1.3633854389190674, 1.3667106628417969, 1.3653936386108398, 1.367356777191162, 1.3665974140167236, 1.369361400604248, 1.3641712665557861, 1.4045674800872803, 1.3602252006530762, 1.3638861179351807, 1.3646063804626465, 1.3681654930114746, 1.3668639659881592, 1.3704845905303955, 1.3655688762664795, 1.3658943176269531, 1.3665106296539307, 1.3638782501220703, 1.3666541576385498, 1.3634593486785889, 1.3652005195617676, 1.365724802017212, 1.368149757385254, 1.3647301197052002, 1.3640668392181396, 1.365757703781128, 1.3676891326904297, 1.3710496425628662, 1.3663418292999268, 1.4248194694519043, 1.3696627616882324, 1.3673698902130127, 1.3678474426269531, 1.363987684249878, 1.3626160621643066, 1.3859989643096924, 1.36322021484375, 1.3631374835968018, 1.4168550968170166, 1.315138339996338, 1.3663337230682373, 1.3642244338989258, 1.371328353881836, 1.3744399547576904, 1.390169382095337, 1.4168410301208496, 1.3638982772827148, 1.3651633262634277, 1.3681981563568115, 1.3711700439453125, 1.3890631198883057, 1.3663365840911865, 1.3681468963623047, 1.366877794265747, 1.3665344715118408, 1.3672685623168945, 1.3244926929473877]

averages = [sum(Load_Implicit_Model)/len(Load_Implicit_Model), sum(Add_weights_from_model)/len(Add_weights_from_model), sum(Do_2D_detections)/len(Do_2D_detections),  sum(Do_predictions_Implicit)/len(Do_predictions_Implicit),sum(Save_files)/len(Save_files)]
names = ["Load Implicit Model", "Add Weights", "Do 2D detections", "Do Predictions", "Save Files"]
print("Total average computional time" + str(sum(averages)))

# Plotting
plt.figure(figsize=(8, 8))
plt.pie(averages, labels=names, autopct='%1.1f%%', startangle=90, textprops={'fontsize': 20})
plt.show()


##data from API
TotalTime = [4.698338508605957, 6.124668121337891, 5.813093423843384, 3.5001139640808105, 5.678597688674927, 5.09032416343689, 4.117327451705933, 5.2029337882995605, 3.319758653640747, 3.279193639755249, 5.643506765365601, 3.4887983798980713, 2.62125825881958, 4.727861404418945, 5.055080890655518, 4.96857213973999, 4.258218288421631, 4.751357078552246, 6.11960244178772, 4.5074098110198975, 4.8703813552856445, 4.629910707473755, 12.475452184677124, 4.085177659988403, 4.449681520462036, 5.984391689300537, 5.616703510284424, 3.3158817291259766, 4.719395637512207, 3.862884283065796, 7.03862738609314, 3.4164910316467285, 4.112406253814697, 4.14183497428894, 3.175623893737793, 4.608696460723877, 4.144912242889404, 4.314971923828125, 5.042157411575317, 5.307140588760376, 3.726853847503662, 4.182585716247559, 6.062723398208618, 4.927343368530273, 3.8699591159820557, 5.457762241363525, 6.9079413414001465, 3.261580467224121, 2.203383207321167, 2.4114668369293213, 3.9029927253723145, 3.859598398208618, 2.492342472076416, 5.751171827316284, 4.443696022033691, 2.31056809425354, 3.0068976879119873, 4.973912715911865, 3.4540154933929443, 2.293247938156128, 3.7459659576416016, 3.2684240341186523, 1.9024698734283447, 2.824108839035034, 5.982639312744141, 3.6114275455474854, 1.719653606414795, 1.7043304443359375, 2.1507408618927, 2.1327474117279053, 3.225280523300171, 3.4869186878204346, 1.6741142272949219, 3.4960148334503174, 1.8940355777740479, 2.518209934234619, 1.22273588180542, 6.829423666000366, 3.155705451965332, 3.756453514099121, 6.314847230911255, 2.7920315265655518, 3.055084466934204, 5.414003610610962, 3.233952283859253, 2.317671775817871, 5.463882684707642, 2.4142580032348633, 2.825472116470337, 3.59812331199646, 2.377197742462158, 6.982496023178101, 1.832301378250122, 1.8951685428619385]
zip_time = [0.3222377300262451, 0.7098188400268555, 0.6333463191986084, 0.3848731517791748, 0.6003389358520508, 0.4006648063659668, 0.39551353454589844, 0.5409908294677734, 0.37977075576782227, 0.3751657009124756, 0.7430992126464844, 0.37749385833740234, 0.26607203483581543, 0.5352051258087158, 0.5355393886566162, 0.5531518459320068, 0.43770384788513184, 0.5479528903961182, 0.7804477214813232, 0.5300266742706299, 0.5347237586975098, 0.5483317375183105, 0.062328338623046875, 0.4387166500091553, 0.4596269130706787, 0.7181329727172852, 0.6704723834991455, 0.40016722679138184, 0.5354647636413574, 0.4164736270904541, 0.7624084949493408, 0.2989692687988281, 0.4271047115325928, 0.411060094833374, 0.37216901779174805, 0.5307137966156006, 0.4365835189819336, 0.48330259323120117, 0.5661568641662598, 0.6266827583312988, 0.4033026695251465, 0.4862534999847412, 0.7548370361328125, 0.5151188373565674, 0.4258100986480713, 0.6623566150665283, 0.8156030178070068, 0.3619570732116699, 0.23859000205993652, 0.21455121040344238, 0.45723509788513184, 0.39564013481140137, 0.24376344680786133, 0.6353673934936523, 0.48379945755004883, 0.20473408699035645, 0.19837260246276855, 0.24541258811950684, 0.37523341178894043, 0.22344541549682617, 0.3770179748535156, 0.33318138122558594, 0.19996166229248047, 0.25145888328552246, 0.5365662574768066, 0.34918928146362305, 0.1585369110107422, 0.05544257164001465, 0.17017626762390137, 0.1540231704711914, 0.2897298336029053, 0.3826913833618164, 0.1638658046722412, 0.18220090866088867, 0.15950250625610352, 0.2575380802154541, 0.09505915641784668, 0.8476066589355469, 0.28970909118652344, 0.3897078037261963, 0.6894617080688477, 0.22519826889038086, 0.41858625411987305, 0.6052730083465576, 0.36710095405578613, 0.19944548606872559, 0.608623743057251, 0.2743992805480957, 0.3444373607635498, 0.35358142852783203, 0.20476293563842773, 0.747443437576294, 0.1815040111541748, 0.05448460578918457]
Implicit_calculations =[2.452073097229004, 3.9335081577301025, 3.584249496459961, 1.8343920707702637, 3.413140058517456, 2.396761655807495, 1.948075771331787, 3.29243803024292, 1.8873302936553955, 1.8384361267089844, 3.3410537242889404, 1.8115119934082031, 1.5038461685180664, 2.9330742359161377, 3.1036627292633057, 3.1881320476531982, 2.6469168663024902, 2.800079107284546, 3.6604528427124023, 2.759058952331543, 2.810720443725586, 2.7387187480926514, 0.4661123752593994, 2.367124080657959, 2.3134992122650146, 3.6946773529052734, 3.314959764480591, 1.8750288486480713, 2.805809736251831, 2.329698324203491, 4.564108610153198, 1.8097209930419922, 2.3476192951202393, 2.6222171783447266, 1.8130030632019043, 2.7353436946868896, 2.6459412574768066, 2.6502370834350586, 2.728985548019409, 3.1561365127563477, 2.271045684814453, 2.631535768508911, 3.7050583362579346, 3.170020818710327, 2.2867136001586914, 3.3171613216400146, 4.377109050750732, 1.8919541835784912, 1.1306986808776855, 1.37642502784729, 2.332353115081787, 2.2193222045898438, 1.4222724437713623, 3.58459734916687, 2.73525071144104, 1.4062223434448242, 1.3928027153015137, 1.4943435192108154, 2.2276690006256104, 1.3841989040374756, 2.2721164226531982, 1.975602149963379, 1.0041580200195312, 1.3860602378845215, 3.228050947189331, 1.8048913478851318, 0.8906409740447998, 0.4535229206085205, 0.9396898746490479, 0.9282457828521729, 1.7885828018188477, 1.8654637336730957, 0.8947079181671143, 0.9273953437805176, 0.8971247673034668, 1.3424584865570068, 0.4858438968658447, 4.28520131111145, 1.8005807399749756, 2.240902900695801, 3.7415435314178467, 1.3431766033172607, 1.5601394176483154, 3.2724146842956543, 1.8462162017822266, 1.3261892795562744, 3.2568278312683105, 1.3680317401885986, 1.4155566692352295, 2.272118091583252, 1.3605029582977295, 4.094602584838867, 0.910275936126709, 0.5059540271759033]
TwoDetections = [1.0608067512512207, 0.12274384498596191, 0.1217195987701416, 0.12055301666259766, 0.11917495727539062, 0.12223672866821289, 0.12758946418762207, 0.12510347366333008, 0.12370777130126953, 0.11933231353759766, 0.12208151817321777, 0.11491990089416504, 0.11256289482116699, 0.12347412109375, 0.1246638298034668, 0.12395906448364258, 0.13037610054016113, 0.12264084815979004, 0.12453913688659668, 0.13136839866638184, 0.11787605285644531, 0.12334489822387695, 0.11182188987731934, 0.12339925765991211, 0.12160682678222656, 0.12203669548034668, 0.12073898315429688, 0.12068653106689453, 0.12561392784118652, 0.12195348739624023, 0.13022637367248535, 0.11819839477539062, 0.12116312980651855, 0.1229405403137207, 0.12129926681518555, 0.12103605270385742, 0.12457442283630371, 0.12503719329833984, 0.11874794960021973, 0.12333035469055176, 0.11698627471923828, 0.11869931221008301, 0.12443089485168457, 0.12630772590637207, 0.12175893783569336, 0.1342024803161621, 0.12732553482055664, 0.1269242763519287, 0.11582040786743164, 0.11402273178100586, 0.1215214729309082, 0.12172198295593262, 0.11948204040527344, 0.12711787223815918, 0.1218879222869873, 0.1182408332824707, 0.11963653564453125, 0.1188051700592041, 0.12064337730407715, 0.12032914161682129, 0.12234044075012207, 0.12033271789550781, 0.11650252342224121, 0.11364150047302246, 0.12539315223693848, 0.12627458572387695, 0.11633515357971191, 0.11361336708068848, 0.12757349014282227, 0.11319422721862793, 0.12230157852172852, 0.12149405479431152, 0.11624360084533691, 0.11350131034851074, 0.11183476448059082, 0.11501431465148926, 0.11581826210021973, 0.12374663352966309, 0.11472320556640625, 0.122467041015625, 0.12121033668518066, 0.130279541015625, 0.11703610420227051, 0.12604832649230957, 0.1153111457824707, 0.11238861083984375, 0.12858843803405762, 0.11723780632019043, 0.11206340789794922, 0.12214064598083496, 0.11324739456176758, 0.12841057777404785, 0.11582732200622559, 0.11018896102905273]
preprocess = [0.03845357894897461, 0.029465198516845703, 0.02032184600830078, 0.06844067573547363, 0.06841039657592773, 0.11925458908081055, 0.05229783058166504, 0.029249191284179688, 0.07595467567443848, 0.08162784576416016, 0.04392552375793457, 0.01996636390686035, 0.04113006591796875, 0.06919097900390625, 0.0515596866607666, 0.08950495719909668, 0.05235004425048828, 0.08684039115905762, 0.08978533744812012, 0.09249258041381836, 0.03763866424560547, 0.08244657516479492, 0.022156953811645508, 0.04544687271118164, 0.07876038551330566, 0.03403139114379883, 0.12021017074584961, 0.07996940612792969, 0.08420920372009277, 0.07804059982299805, 0.07795143127441406, 0.02811741828918457, 0.038126468658447266, 0.02493143081665039, 0.07001352310180664, 0.030607223510742188, 0.08124303817749023, 0.08740401268005371, 0.022830724716186523, 0.08293795585632324, 0.02344822883605957, 0.025699853897094727, 0.09274482727050781, 0.061629533767700195, 0.07991218566894531, 0.0677485466003418, 0.07280993461608887, 0.0733330249786377, 0.06500458717346191, 0.024387836456298828, 0.09316897392272949, 0.09329652786254883, 0.03958535194396973, 0.08544230461120605, 0.0923459529876709, 0.059923648834228516, 0.08102726936340332, 0.03435397148132324, 0.0504305362701416, 0.05603599548339844, 0.08406639099121094, 0.08308601379394531, 0.05574297904968262, 0.021607637405395508, 0.09304976463317871, 0.06717920303344727, 0.07541418075561523, 0.04920506477355957, 0.09302353858947754, 0.04594230651855469, 0.06551313400268555, 0.09723496437072754, 0.027714967727661133, 0.13620638847351074, 0.0859377384185791, 0.01782083511352539, 0.07312464714050293, 0.019875288009643555, 0.021567344665527344, 0.06447458267211914, 0.020433664321899414, 0.23963451385498047, 0.06076407432556152, 0.08721399307250977, 0.021199464797973633, 0.021091938018798828, 0.04468536376953125, 0.08739352226257324, 0.04070925712585449, 0.0429081916809082, 0.028441667556762695, 0.1031496524810791, 0.11254358291625977, 0.04119396209716797]

averages = [sum(preprocess)/len(preprocess), sum(TwoDetections)/len(TwoDetections), sum(Implicit_calculations)/len(Implicit_calculations), sum(zip_time)/len(zip_time)]
names = ["PreProcess", "Do 2D Detections", "Do Predictions", "Zip Time", "Network"]
Network_cost = (sum(TotalTime)/len(TotalTime)) - sum(averages)
averages.append(Network_cost)
print("Total average time API" + str(sum(averages)))

# Plotting
plt.figure(figsize=(8, 8))
plt.pie(averages, labels=names, autopct='%1.1f%%', startangle=90, textprops={'fontsize': 20})
plt.show()
